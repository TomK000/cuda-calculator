<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <title>CUDA Occupancy Calculator</title>
  <meta name="description" content="This site helps you calculate the occupancy of your CUDA kernel.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="css/style.css">

</head>

<body>

<div class="container">
  <h1>CUDA Occupancy Calculator</h1>

  <form>
    <div class="form-group">
      <label for="version">Compute Capability version</label>
      <select class="form-control" id="version" name="version" autofocus>
        <option value="1.0" selected="selected">1.0</option>
        <option value="1.1">1.1</option>
        <option value="1.2">1.2</option>
        <option value="1.3">1.3</option>
        <option value="2.0">2.0</option>
        <option value="2.1">2.1</option>
        <option value="3.0">3.0</option>
        <option value="3.5">3.5</option>
        <option value="3.7">3.7</option>
        <option value="5.0">5.0</option>
        <option value="5.2">5.2</option>
        <option value="5.3">5.3</option>
        <option value="6.0">6.0</option>
        <option value="6.1">6.1</option>
        <option value="6.2">6.2</option>
        <option value="7.0">7.0</option>
      </select>
    </div>
    <div class="form-group">
      <label for="threadsPerBlock">Threads per block</label>
      <input type="number" class="form-control" id="threadsPerBlock" name="threadsPerBlock" value="256" min="0">
    </div>
    <div class="form-group">
      <label for="registersPerThread">Registers per thread</label>
      <input type="number" class="form-control" id="registersPerThread" name="registersPerThread" value="8" min="0">
    </div>
    <div class="form-group">
      <label for="sharedMemoryPerBlock">Shared memory per block</label>
      <input type="number" class="form-control" id="sharedMemoryPerBlock" name="sharedMemoryPerBlock" value="1024"
             min="0">
    </div>
    <div class="form-group">
      <button type="submit" class="btn btn-primary">Calculate</button>
    </div>
  </form>

  <div id="output" hidden>
    <table class="table table-striped table-hover">
      <caption>GPU Occupancy Data is displayed here and in the graphs</caption>
      <tr>
        <th>Active Threads per Multiprocessor</th>
        <td data-value="activeThreadsPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Active Warps per Multiprocessor</th>
        <td data-value="activeWarpsPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Active Thread Blocks per Multiprocessor</th>
        <td data-value="activeThreadBlocksPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Occupancy of each Multiprocessor</th>
        <td data-value="occupancyOfMultiprocessor"></td>
      </tr>
    </table>

    <table class="table table-striped table-hover">
      <caption>Physical Limits for GPU Compute Capability</caption>
      <tr>
        <th>Version</th>
        <td data-value="version"></td>
      </tr>
      <tr>
        <th>Threads per Warp</th>
        <td data-value="threadsPerWarp"></td>
      </tr>
      <tr>
        <th>Warps per Multiprocessor</th>
        <td data-value="warpsPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Threads per Multiprocessor</th>
        <td data-value="threadsPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Thread Blocks per Multiprocessor</th>
        <td data-value="threadBlocksPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Total # of 32-bit registers per Multiprocessor</th>
        <td data-value="registerFileSize"></td>
      </tr>
      <tr>
        <th>Register allocation unit size</th>
        <td data-value="registerAllocationUnitSize"></td>
      </tr>
      <tr>
        <th>Register allocation granularity</th>
        <td data-value="allocationGranularity"></td>
      </tr>
      <tr>
        <th>Shared Memory per Multiprocessor (bytes)</th>
        <td data-value="sharedMemoryPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Shared Memory Allocation unit size</th>
        <td data-value="sharedMemoryAllocationUnitSize"></td>
      </tr>
      <tr>
        <th>Warp allocation granularity (for register allocation)</th>
        <td data-value="warpAllocationGranularity"></td>
      </tr>
    </table>

    <table class="table table-striped table-hover">
      <caption>Allocation Per Thread Block</caption>
      <tr>
        <th>Warps</th>
        <td data-value="blockWarps"></td>
      </tr>
      <tr>
        <th>Registers</th>
        <td data-value="blockRegisters"></td>
      </tr>
      <tr>
        <th>Shared Memory</th>
        <td data-value="blockSharedMemory"></td>
      </tr>
    </table>

    <table class="table table-striped table-hover">
      <caption>Maximum Thread Blocks Per Multiprocessor</caption>
      <tr>
        <th>Limited by Max Warps / Blocks per Multiprocessor</th>
        <td data-value="threadBlocksPerMultiprocessorLimitedByWarpsOrBlocksPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Limited by Registers per Multiprocessor</th>
        <td data-value="threadBlocksPerMultiprocessorLimitedByRegistersPerMultiprocessor"></td>
      </tr>
      <tr>
        <th>Limited by Shared Memory per Multiprocessor</th>
        <td data-value="threadBlocksPerMultiprocessorLimitedBySharedMemoryPerMultiprocessor"></td>
      </tr>
    </table>

    <figure class="figure">
      <figcaption class="figure-caption"><h4>Impact of Varying Block Size</h4></figcaption>
    </figure>

    <figure class="figure">
      <figcaption class="figure-caption"><h4>Impact of Varying Register Count Per Thread</h4></figcaption>
    </figure>

    <figure class="figure">
      <figcaption class="figure-caption"><h4>Impact of Varying Shared Memory Usage Per Block</h4></figcaption>
    </figure>
  </div>
</div>

<a href="https://github.com/xmartlabs/cuda-calculator">
  <img id="fork-me" src="img/fork_me_right_gray_6d6d6d.png" alt="Fork me on GitHub">
</a>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/underscore@1.12.0/underscore-min.js"></script>
<script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script>

<script src="js/calculator.js"></script>
<script src="js/graph.js"></script>
<script src="js/app.js"></script>

</body>
</html>
